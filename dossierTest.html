<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rebellious Takeover - Character Select</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Permanent+Marker&family=Sedgwick+Ave+Display&display=swap" rel="stylesheet">
    <script src="https://kit.fontawesome.com/0bca0ecf78.js" crossorigin="anonymous"></script>

    <style>
        /* =========================================
           CORE VARIABLES
           ========================================= */
        :root {
            --color-background-main: #121212;
            --color-text-main: white;
            --color-text-med: #ccc;
            --color-accent-tertiary-border: rgba(67, 60, 94, 0.5);
            --active-char-color: #ff384f; 
        }

        body {
            background-color: var(--color-background-main);
            color: var(--color-text-main);
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 40px;
            height: 100vh;
            box-sizing: border-box;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        a { color: inherit; text-decoration: none; }

        /* =========================================
           SCI-FI CONTAINER
           ========================================= */
        
        .character-select-container {
            position: relative;
            width: 100%;
            max-width: 1600px;
            height: 75vh; 
            min-height: 550px;
            max-height: 800px;
            
            background: radial-gradient(circle at center 80%, #1a1a1a 0%, #0a0a0a 100%);
            clip-path: polygon(20px 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%, 0 20px);
            box-shadow: inset 0 0 0 2px var(--color-accent-tertiary-border);
            
            background-image: 
                linear-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px);
            background-size: 50px 50px;
            
            perspective: 1500px;
            transform-style: preserve-3d;
            transition: box-shadow 0.4s ease;
        }

        /* --- THE STAGE --- */
        .char-stage {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            transform-style: preserve-3d;
            transition: transform 0.1s ease-out; 
            /* Ensure the stage doesn't block clicks to the cards */
            pointer-events: none; 
        }

        /* --- CHARACTER CARDS (THE HITBOX) --- */
        /* IMPORTANT: This element creates the click area. It MUST NOT MOVE on hover. */
        .char-card {
            position: absolute;
            bottom: 0;
            width: auto;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.8, 0.25, 1);
            transform-origin: bottom center;
            filter: grayscale(0.1); 
            z-index: 10;
            display: flex;
            justify-content: center;
            align-items: flex-end;
            transform-style: preserve-3d;
            
            /* Enable pointer events on the card itself */
            pointer-events: auto; 
        }

        /* --- TILT WRAPPER (THE VISUALS) --- */
        /* This handles the pop-up animation separately from the hitbox */
        .tilt-wrapper {
            height: 100%;
            width: auto;
            display: flex;
            align-items: flex-end;
            transform-style: preserve-3d;
            pointer-events: none; /* Clicks pass through to card */
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .char-card img {
            height: 100%;
            width: auto;
            display: block;
            filter: drop-shadow(0 10px 15px rgba(0,0,0,0.6)); 
            pointer-events: none; 
            object-fit: contain;
        }

        /* --- POSITIONS --- */
        /* Note: No Z-translation on resting state to prevent click blocking */
        .char-card.layer-1 { z-index: 40; }
        .char-card.layer-1.left { left: 42%; transform: translateX(-50%); } 
        .char-card.layer-1.right { left: 58%; transform: translateX(-50%); }

        .char-card.layer-2 { z-index: 30; } 
        .char-card.layer-2.left { left: 28%; transform: translateX(-50%) scale(0.95); }
        .char-card.layer-2.right { left: 72%; transform: translateX(-50%) scale(0.95); }

        .char-card.layer-3 { z-index: 20; } 
        .char-card.layer-3.left { left: 16%; transform: translateX(-50%) scale(0.90); }
        .char-card.layer-3.right { left: 84%; transform: translateX(-50%) scale(0.90); }

        .char-card.layer-4 { z-index: 10; opacity: 0.9; } 
        .char-card.layer-4.left { left: 8%; transform: translateX(-50%) scale(0.85); }
        .char-card.layer-4.right { left: 92%; transform: translateX(-50%) scale(0.85); }


        /* --- HOVER EFFECTS (THE FIX) --- */
        
        /* 1. Container dimming */
        .character-select-container:hover .char-card {
            opacity: 0.4;
            filter: grayscale(1) blur(2px);
            transition: opacity 0.3s, filter 0.3s;
        }

        /* 2. Active Card - NO MOVEMENT HERE */
        .character-select-container .char-card:hover {
            opacity: 1;
            filter: grayscale(0) drop-shadow(0 0 25px var(--active-char-color));
            z-index: 100;
            /* We do NOT translate the card itself, only the Z-index and filters */
        }

        /* 3. The Visual Pop - APPLIED TO CHILD ONLY */
        .char-card:hover .tilt-wrapper {
            /* This moves the image UP, but the hitbox (char-card) stays DOWN */
            transform: scale(1.05) translateY(-15px);
        }

        /* Name Plate */
        .char-name-plate {
            position: absolute;
            top: 25%;
            left: 50%;
            /* Start state */
            transform: translateX(-50%) translateY(20px) rotateX(20deg); 
            background: var(--active-char-color);
            color: #111;
            padding: 5px 20px;
            font-family: 'Sedgwick Ave Display', cursive;
            font-size: 32px;
            opacity: 0;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            pointer-events: none;
            white-space: nowrap;
            clip-path: polygon(5% 0, 100% 0, 95% 100%, 0% 100%);
            z-index: 101;
            text-transform: uppercase;
            text-shadow: 1px 1px 0px rgba(255,255,255,0.4);
        }

        .char-card:hover .char-name-plate {
            opacity: 1;
            transform: translateX(-50%) translateY(0) rotateX(0deg);
        }

        /* =========================================
           DOSSIER ACTIVE MODE
           ========================================= */

        .character-select-container.dossier-active {
            box-shadow: inset 0 0 0 2px var(--active-char-color), 0 0 30px var(--active-char-color);
        }

        .character-select-container.dossier-active .char-card {
            opacity: 0;
            pointer-events: none;
            transition: transform 0.5s ease, opacity 0.3s ease;
            transform: translateX(-100vw) !important;
        }

        /* SELECTED CHAR (Left Side) */
        .character-select-container.dossier-active .char-card.selected {
            opacity: 1 !important;
            filter: grayscale(0) drop-shadow(5px 0 20px rgba(0,0,0,0.5)) !important;
            left: 17.5% !important; 
            right: auto !important;
            height: 95% !important; 
            bottom: 0 !important;
            max-width: 35% !important;
            transform: translateX(-50%) !important;
            z-index: 50;
            pointer-events: none; 
        }
        
        /* Reset child transform on selected card so it doesn't look "hovered" */
        .character-select-container.dossier-active .char-card.selected .tilt-wrapper {
            transform: none !important;
        }
        
        .character-select-container.dossier-active .char-card.selected .char-name-plate {
            display: none !important;
        }

        /* --- INFO PANEL --- */
        .dossier-info-panel {
            position: absolute;
            top: 0; right: 0;
            width: 65%;
            height: 100%;
            background: #0f0f0f; 
            background-image: url('Images/rebTakeover/rebBackground-min.png'); 
            background-size: cover;
            background-position: center;
            background-blend-mode: overlay;
            transform: translateX(100%); 
            transition: transform 0.5s cubic-bezier(0.77, 0, 0.175, 1);
            z-index: 45;
            clip-path: polygon(10% 0, 100% 0, 100% 100%, 0% 100%);
            overflow-y: auto;
            padding: 50px 50px 50px 100px;
            box-sizing: border-box;
        }
        
        .dossier-info-panel::before {
            content: '';
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none;
            box-sizing: border-box;
            clip-path: polygon(10% 0, 100% 0, 100% 100%, 0% 100%);
            border-left: 5px solid var(--active-char-color);
            z-index: 50;
        }

        .character-select-container.dossier-active .dossier-info-panel {
            transform: translateX(0); 
        }

        /* Back Button */
        .dossier-back-btn {
            position: absolute;
            top: 30px; left: 30px;
            z-index: 1000;
            font-family: 'Permanent Marker', cursive;
            font-size: 24px;
            background: rgba(0,0,0,0.8);
            padding: 10px 25px;
            border: 2px solid white;
            clip-path: polygon(10px 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%, 0 10px);
            color: white;
            cursor: pointer;
            opacity: 0;
            pointer-events: none;
            transition: all 0.3s;
        }
        .dossier-back-btn:hover { 
            background: var(--active-char-color); 
            border-color: var(--active-char-color);
            color: #111;
            transform: scale(1.05);
        }
        .character-select-container.dossier-active .dossier-back-btn {
            opacity: 1;
            pointer-events: auto;
        }

        /* --- CONTENT STYLING --- */
        .dossier-header { display: flex; gap: 30px; align-items: center; margin-bottom: 30px; }
        
        .dossier-header img { 
            width: 140px; height: 140px; object-fit: contain; 
            border: 2px solid var(--active-char-color);
            background: rgba(255,255,255,0.05); 
            padding: 10px;
            box-shadow: 8px 8px 0px var(--active-char-color);
            transition: transform 0.1s ease-out; 
            transform-style: preserve-3d;
        }
        
        .dossier-title-area h2 { 
            font-family: 'Sedgwick Ave Display', cursive; font-size: 70px; 
            margin: 0 0 15px 0; 
            line-height: 0.9;
            color: var(--active-char-color); 
            text-shadow: 4px 4px 0px rgba(0,0,0,1); 
            transform: rotate(-2deg);
        }
        
        .dossier-title-area .quote { 
            font-family: 'Permanent Marker', cursive; font-style: italic; color: #ccc; font-size: 22px;
            margin-top: 0;
            border-left: 4px solid var(--active-char-color); 
            padding-left: 15px;
            background: linear-gradient(90deg, rgba(255,255,255,0.05), transparent);
        }
        
        .dossier-body { font-size: 18px; line-height: 1.7; color: #e0e0e0; }
        .dossier-body hr { border: 0; border-top: 2px dashed #444; margin: 25px 0; }
        .dossier-body strong { color: var(--active-char-color); font-family: 'Permanent Marker', cursive; letter-spacing: 1px; }
        .dossier-body ul { list-style-type: none; padding-left: 0; }
        .dossier-body li { margin-bottom: 10px; padding-left: 15px; border-left: 2px solid #444; }
        
        .artist-credit { font-size: 14px; color: #888; margin-bottom: 10px; }
        .artist-credit a {
            background: linear-gradient(to right, #64f56e, #a4f5aa);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: bold;
        }

        .dossier-info-panel::-webkit-scrollbar { width: 10px; }
        .dossier-info-panel::-webkit-scrollbar-track { background: rgba(0, 0, 0, 0.3); }
        .dossier-info-panel::-webkit-scrollbar-thumb {
            background-color: var(--active-char-color);
            border: 2px solid rgba(0, 0, 0, 0.2);
        }

    </style>
</head>
<body>

    <div class="character-select-container">
        
        <button id="dossier-back-btn" class="dossier-back-btn"><i class="fas fa-arrow-left"></i> Roster</button>

        <div class="char-stage" id="parallax-stage">
            
            <div class="char-card layer-4 left" data-char="maya" data-color="#00FFFF" style="height: 83%;"> 
                <div class="tilt-wrapper"><img src="Images/rebTakeover/fullbody/mae.png" alt="Mae"></div>
                <div class="char-name-plate">MAE</div>
            </div>
            <div class="char-card layer-4 right" data-char="luca" data-color="#808080" style="height: 89%;"> 
                <div class="tilt-wrapper"><img src="Images/rebTakeover/fullbody/luca.png" alt="Luca"></div>
                <div class="char-name-plate">LUCA</div>
            </div>

            <div class="char-card layer-3 left" data-char="raleigh" data-color="#FFA500" style="height: 78%;"> 
                <div class="tilt-wrapper"><img src="Images/rebTakeover/fullbody/ral.png" alt="Ral"></div>
                <div class="char-name-plate">RAL</div>
            </div>
            <div class="char-card layer-3 right" data-char="lyra" data-color="#39FF14" style="height: 82%;"> 
                <div class="tilt-wrapper"><img src="Images/rebTakeover/fullbody/lyra.png" alt="Lyra"></div>
                <div class="char-name-plate">LYRA</div>
            </div>

            <div class="char-card layer-2 left" data-char="celynn" data-color="#FFFFFF" style="height: 89%;"> 
                <div class="tilt-wrapper"><img src="Images/rebTakeover/fullbody/cel.png" alt="Cel"></div>
                <div class="char-name-plate">CEL</div>
            </div>
            <div class="char-card layer-2 right" data-char="jayce" data-color="#6A5ACD" style="height: 87%;"> 
                <div class="tilt-wrapper"><img src="Images/rebTakeover/fullbody/jayce.png" alt="Jayce"></div>
                <div class="char-name-plate">JAYCE</div>
            </div>

            <div class="char-card layer-1 left" data-char="phenn" data-color="#FF4F6C" style="height: 90%;"> 
                <div class="tilt-wrapper"><img src="Images/rebTakeover/fullbody/phenn.png" alt="Phenn"></div>
                <div class="char-name-plate">PHENN</div>
            </div>
            <div class="char-card layer-1 right" data-char="deren" data-color="#0047AB" style="height: 85%;"> 
                <div class="tilt-wrapper"><img src="Images/rebTakeover/fullbody/deren.png" alt="Deren"></div>
                <div class="char-name-plate">DEREN</div>
            </div>

        </div>

        <div class="dossier-info-panel" id="dossier-panel">
            <div class="panel-content-placeholder">
                </div>
        </div>

    </div>

    <div id="dossier-data-source" style="display:none;">
        <div id="dossier-deren">
            <div class="dossier-header">
                <img class="parallax-item" src="Images/rebTakeover/chibis/deren.png">
                <div class="dossier-title-area">
                    <h2>Deren Kael</h2>
					<br>
                    <p class="quote">"Veritas chose the wrong person to screw with."</p>
                </div>
            </div>
            <div class="dossier-body">
                <p class="artist-credit">Artwork done by <a href="https://www.fiverr.com/glaciercyforce">glaciercyforce/Gar</a></p>
                <p><strong>AGE:</strong> 26 <br> <strong>HEIGHT:</strong> 176.7cm (~5'9)</p>
                <p><strong>ROLE:</strong> Tactician / Leader</p>
                <p><strong>AFFILIATION:</strong> Subroutine</p>
                <hr>
                <p>The team's overconfident tactician. Deren's always acting like he's got the plan locked down, because, in his head, he already won three simulations ago. He makes chaos look calculated, and is the leader of the team. They made the C.O.R.E, a mechanical heart replacement using the universe's replacement to conventional electricity methods, Vithium, that Veritas stole the blueprints to and is now intending to use for evil.</p>
                <hr>
                <p><strong>PSYCH PROFILE & VITALS:</strong></p>
                <ul>
                    <li><strong>Conditions:</strong> ASD, Mild OCD, Insomnia, PTSD.</li>
                    <li><strong>Defining Characteristics:</strong> Visible C.O.R.E. implant on chest, scouter-style visor, cat ears and tail.</li>
                    <li><strong>Intel Notes:</strong> A tech prodigy from a young age originally going by the corny nickname 'Derpz'; built his own heart replacement before Vithium was even considered valuable. Witnessed the "Animal-Human Hybrid Extinction Event" firsthand.</li>
                </ul>
            </div>
        </div>
        
         <div id="dossier-phenn"><div class="dossier-header"><img class="parallax-item" src="Images/rebTakeover/chibis/phenn.png"><div class="dossier-title-area"><h2>Phenn Ashcroft</h2><br><p class="quote">"I-I don't miss. I just... wait until it's perfect."</p></div></div><div class="dossier-body"><p class="artist-credit">Artwork done by <a href="https://www.fiverr.com/glaciercyforce">glaciercyforce/Gar</a></p><p><strong>AGE:</strong> 24 <br> <strong>HEIGHT:</strong> 187.8cm (~6'2)</p><p><strong>ROLE:</strong> Strategist / Ranged Support</p><p><strong>AFFILIATION:</strong> Subroutine</p><hr><p>Quiet, but never truly clueless. Phenn stays in the back, reading what's happening and being the strategizer and coordinator for the team. When she speaks up, you'd better listen. She's probably saving your life.</p><hr><p><strong>PSYCH PROFILE & VITALS:</strong></p><ul><li><strong>Conditions:</strong> ASD, Social Anxiety, Mild Sensory Issues, PTSD.</li><li><strong>Defining Characteristics:</strong> Cat ears and tail matching her pinkish-red hair.</li><li><strong>Intel Notes:</strong> Remembers Deren helping her family escape during the extinction event years ago. This shared trauma is a cornerstone of their deep bond.</li></ul></div></div>
         <div id="dossier-jayce"><div class="dossier-header"><img class="parallax-item" src="Images/rebTakeover/chibis/jayce.png"><div class="dossier-title-area"><h2>Jayce "J" Davren</h2><br><p class="quote">"I don't need to be the loudest, just the one who walks out unscathed."</p></div></div><div class="dossier-body"><p class="artist-credit">Artwork done by <a href="https://www.fiverr.com/glaciercyforce">glaciercyforce/Gar</a></p><p><strong>AGE:</strong> 20 <br> <strong>HEIGHT:</strong> 180.1cm (~5'11)</p><p><strong>ROLE:</strong> Hacker / Combat Support</p><p><strong>AFFILIATION:</strong> Subroutine</p><hr><p>The sarcastic hacker with a bit of humour. Jayce doesn't need to yell to take the lead, he just calculates the best outcome and makes it happen. Calm in combat, composed under fire, but you can bet he's already panicking on the inside.</p><hr><p><strong>PSYCH PROFILE & VITALS:</strong></p><ul><li><strong>Conditions:</strong> ASD, Social & General Anxiety, RSD.</li><li><strong>Defining Characteristics:</strong> Thick-framed blue glasses, voice-modulating mask, long deep blue scarf.</li><li><strong>Intel Notes:</strong> Was a regular customer at Subroutine before joining the mission. His biggest fear about joining, funnily, wasn't fighting a mega-corp, but having to live with roommates.</li></ul></div></div>
         <div id="dossier-lyra"><div class="dossier-header"><img class="parallax-item" src="Images/rebTakeover/chibis/lyra.png"><div class="dossier-title-area"><h2>Lyra "Ly" Vayne</h2><br><p class="quote">"I didn't hack the system. I AM the system."</p></div></div><div class="dossier-body"><p class="artist-credit">Artwork done by <a href="https://www.fiverr.com/glaciercyforce">glaciercyforce/Gar</a></p><p><strong>AGE:</strong> 21 <br> <strong>HEIGHT:</strong> 170.1cm (5'7)</p><p><strong>ROLE:</strong> Hacker / Sniper</p><p><strong>AFFILIATION:</strong> Subroutine</p><hr><p>Barely sleeps, but knows exactly what she's doing. The second hacker of the team - An agoraphobic internet lurker that barely goes out. When she is, she fights with a weapon she may or may not have overclocked past safety limits. Lyra is your resident gremlin hacker-sniper who is just always <i>one</i> energy drink away from Godhood.</p><hr><p><strong>PSYCH PROFILE & VITALS:</strong></p><ul><li><strong>Conditions:</strong> Mild Agoraphobia, ASD, ADHD, Mild OCD, Insomnia, Hypersomnia.</li><li><strong>Defining Characteristics:</strong> Constant eye bags from lack of sleep, messy hair, always dressed for comfort over style.</li><li><strong>Intel Notes:</strong> Her personal grudge against Veritas became a vendetta after they bought out her apartment building and forced her onto the streets.</li></ul></div></div>
         <div id="dossier-celynn"><div class="dossier-header"><img class="parallax-item" src="Images/rebTakeover/chibis/cel.png"><div class="dossier-title-area"><h2>Celynn "Cel" Avers</h2><br><p class="quote">"I don't raise my voice. I just end things."</p></div></div><div class="dossier-body"><p class="artist-credit">Artwork done by <a href="https://www.fiverr.com/glaciercyforce">glaciercyforce/Gar</a></p><p><strong>AGE:</strong> 24 <br> <strong>HEIGHT:</strong> 184cm (~6'1)</p><p><strong>ROLE:</strong> Enforcer</p><p><strong>AFFILIATION:</strong> Subroutine</p><hr><p>Cel doesn't waste words, or bullets. Cool-headed and dependable, he's the rock the team leans on when things go nuclear. If he's stepping in, it means something's about to go down and nobody is coming out alive.</p><hr><p><strong>PSYCH PROFILE & VITALS:</strong></p><ul><li><strong>Conditions:</strong> ASD, Anxiety, Insomnia.</li><li><strong>Defining Characteristics:</strong> A worn-in, messy look; sharp, observant eyes; hands often tucked in his hoodie.</li><li><strong>Intel Notes:</strong> Childhood friend of Raleigh, and the calm anchor to her storm. He's incredibly determined and will push himself past his limits for the team, often neglecting his own self-care.</li></ul></div></div>
         <div id="dossier-raleigh"><div class="dossier-header"><img class="parallax-item" src="Images/rebTakeover/chibis/ral.png"><div class="dossier-title-area"><h2>Raleigh "Ral" Avers</h2><br><p class="quote">"Rules? Cute. I eat those for breakfast."</p></div></div><div class="dossier-body"><p class="artist-credit">Artwork done by <a href="https://www.fiverr.com/glaciercyforce">glaciercyforce/Gar</a></p><p><strong>AGE:</strong> 22 <br> <strong>HEIGHT:</strong> 162cm (~5'4)</p><p><strong>ROLE:</strong> Chaos / Melee Specialist</p><p><strong>AFFILIATION:</strong> Subroutine</p><hr><p>Energy incarnate. Ral fights like she lives: with sharp blades and sharper comebacks. Equal parts unhinged and unstoppable, she's here to ruin someone's day, and attempt to look cute doing it. If she's smiling, you should <i>worry</i>.</p><hr><p><strong>PSYCH PROFILE & VITALS:</strong></p><ul><li><strong>Conditions:</strong> ASD, ADHD, Rejection Sensitive Dysphoria (RSD), Insomnia.</li><li><strong>Defining Characteristics:</strong> Wears several plasters practically all over her, Wears prescription glasses, and has black nail polish thatâ€™s almost always chipped.</li><li><strong>Intel Notes:</strong> The first to agree to join the rebellion, immediately dragging Cel along with her. She and Cel are the backbone that keeps the team together.</li></ul></div></div>
         <div id="dossier-maya"><div class="dossier-header"><img class="parallax-item" src="Images/rebTakeover/chibis/mae.png"><div class="dossier-title-area"><h2>Maya "Mae" Everhart</h2><br><p class="quote">"They called it weakness. I call it feeling."</p></div></div><div class="dossier-body"><p class="artist-credit">Artwork done by <a href="https://www.fiverr.com/glaciercyforce">glaciercyforce/Gar</a></p><p><strong>AGE:</strong> 27 <br> <strong>HEIGHT:</strong> 172.3cm (~5'8)</p><p><strong>ROLE:</strong> Tech Specialist</p><p><strong>AFFILIATION:</strong> Subroutine (Formerly Veritas)</p><hr><p>Former Veritas innovator turned team techie. Mae's a genius in her field, but doubt constantly eats at her. She's trying to right her past mistakes one blueprint at a time, even if it means second-guessing every single step.</p><hr><p><strong>PSYCH PROFILE & VITALS:</strong></p><ul><li><strong>Conditions:</strong> ASD, Insomnia, GAD, Depression.</li><li><strong>Defining Characteristics:</strong> Round glasses, freckles, subtle scars, intentional scars hidden by an arm warmer.</li><li><strong>Intel Notes:</strong> Was rescued by the team seconds before being "decommissioned" by Veritas security. Her primary motivation is redemption and protecting Luca.</li></ul></div></div>
         <div id="dossier-luca"><div class="dossier-header"><img class="parallax-item" src="Images/rebTakeover/chibis/luca.png"><div class="dossier-title-area"><h2>Luca "Lu" Voss</h2><br><p class="quote">"I lie to survive, but not to her."</p></div></div><div class="dossier-body"><p class="artist-credit">Artwork done by <a href="https://www.fiverr.com/glaciercyforce">glaciercyforce/Gar</a></p><p><strong>AGE:</strong> 28 <br> <strong>HEIGHT:</strong> 185.4cm (~6'1)</p><p><strong>ROLE:</strong> Infiltrator</p><p><strong>AFFILIATION:</strong> Subroutine (Undercover in Veritas)</p><hr><p>Sharp outfit, sharper instincts. Luca's a double agent walking a razor's edge, feeding the team info while dancing through enemy meetings like it's just another day in Nexon. Stoic on the surface, deeply protective underneath.</p><hr><p><strong>PSYCH PROFILE & VITALS:</strong></p><ul><li><strong>Conditions:</strong> ASD, OCD, High-functioning Anxiety, Insomnia.</li><li><strong>Defining Characteristics:</strong> Sleek AR glasses, a small scar on his cheek, always dressed professionally.</li><li><strong>Intel Notes:</strong> The team's greatest inside asset. He feeds the rebels intel from within Veritas, knowing it's only a matter of time before he's discovered.</li></ul></div></div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const container = document.querySelector('.character-select-container');
            const stage = document.getElementById('parallax-stage');
            const cards = document.querySelectorAll('.char-card');
            const panel = document.getElementById('dossier-panel');
            const panelContent = panel.querySelector('.panel-content-placeholder');
            const backBtn = document.getElementById('dossier-back-btn');
            const root = document.documentElement;
            
            const containerConfig = { maxTilt: 3 }; 
            const chibiConfig = { maxTilt: 5 };

            function handleMouseMove(event) {
                if (!container.classList.contains('dossier-active')) {
                    const rect = container.getBoundingClientRect();
                    const centerX = rect.width / 2;
                    const centerY = rect.height / 2;
                    const mouseX = event.clientX - rect.left;
                    const mouseY = event.clientY - rect.top;
                    
                    const tiltX = ((mouseY - centerY) / centerY) * -1 * containerConfig.maxTilt;
                    const tiltY = ((mouseX - centerX) / centerX) * containerConfig.maxTilt;
                    
                    stage.style.transform = `rotateX(${tiltX}deg) rotateY(${tiltY}deg)`;
                }
            }

            function attachChibiListeners() {
                const chibi = panelContent.querySelector('.dossier-header img'); 
                if (!chibi) return;

                chibi.addEventListener('mousemove', (e) => {
                    const rect = chibi.getBoundingClientRect();
                    const centerX = rect.width / 2;
                    const centerY = rect.height / 2;
                    
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;
                    
                    const rotateX = ((y - centerY) / centerY) * -1 * chibiConfig.maxTilt;
                    const rotateY = ((x - centerX) / centerX) * chibiConfig.maxTilt;

                    chibi.style.transform = `perspective(500px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale(1.05)`;
                    e.stopPropagation();
                });

                chibi.addEventListener('mouseleave', () => {
                    chibi.style.transform = `perspective(500px) rotateX(0deg) rotateY(0deg) scale(1)`;
                });
            }


            function handleMouseLeave() {
                stage.style.transform = `rotateX(0deg) rotateY(0deg)`;
            }

            container.addEventListener('mousemove', handleMouseMove);
            container.addEventListener('mouseleave', handleMouseLeave);
            panel.addEventListener('mousemove', handleMouseMove);
            panel.addEventListener('mouseleave', handleMouseLeave);

            cards.forEach(card => {
                card.addEventListener('mouseenter', () => {
                    if (container.classList.contains('dossier-active')) return;
                    const color = card.dataset.color;
                    root.style.setProperty('--active-char-color', color);
                });

                card.addEventListener('click', () => {
                    const charId = card.dataset.char;
                    const color = card.dataset.color;
                    
                    root.style.setProperty('--active-char-color', color);
                    container.classList.add('dossier-active');
                    
                    stage.style.transform = `rotateX(0deg) rotateY(0deg)`;

                    cards.forEach(c => c.classList.remove('selected'));
                    card.classList.add('selected');

                    const sourceContent = document.getElementById(`dossier-${charId}`);
                    if (sourceContent) {
                        panelContent.innerHTML = sourceContent.innerHTML;
                        attachChibiListeners();
                        panelContent.style.opacity = 0;
                        setTimeout(() => {
                             panelContent.style.transition = 'opacity 0.5s';
                             panelContent.style.opacity = 1; 
                        }, 200);
                    }
                });
            });

            backBtn.addEventListener('click', () => {
                container.classList.remove('dossier-active');
                setTimeout(() => {
                    cards.forEach(c => c.classList.remove('selected'));
                    panelContent.innerHTML = "";
                }, 500);
            });
        });
    </script>
</body>
</html>